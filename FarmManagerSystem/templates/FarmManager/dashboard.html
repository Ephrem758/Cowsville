{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="{% static 'img/apple-icon.png' %}">
  <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}">
  
{% comment %} select 2 end {% endcomment %}

  {% comment %} <title>
    Material Dashboard 2 by Creative Tim
  </title> {% endcomment %}
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
  <!-- Nucleo Icons -->
  <link href="{% static 'css/nucleo-icons.css' %}" rel="stylesheet" />
  <link href="{% static 'css/nucleo-svg.css' %}" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- CSS Files -->
  <link id="pagestyle" href="{% static 'css/material-dashboard.css' %}" rel="stylesheet" />
  <!-- Nepcha Analytics (nepcha.com) -->
  <!-- Nepcha is a easy-to-use web analytics. No cookies and fully compliant with GDPR, CCPA and PECR. -->
  <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
</head>

<body class="g-sidenav-show  bg-gray-200">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3   bg-gradient-dark" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
    </div>
    <hr class="horizontal light mt-0 mb-2">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link text-white active bg-gradient-primary" href="{% url 'dashboard' %}">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">dashboard</i>
            </div>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white " href="{% url 'tables' %}">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">table_view</i>
            </div>
            <span class="nav-link-text ms-1">Tables</span>
          </a>
        </li>
        
        </li>
        
        <li class="nav-item">
          <a class="nav-link text-white " href="{% url 'notifications' %}">
            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons opacity-10">notifications</i>
            </div>
            <span class="nav-link-text ms-1">Notifications</span>
          </a>
        </li>


        <li class="nav-item">
          <a class="nav-link text-white" href="{% url 'average_statistics' %}">
              <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                  <i class="material-icons opacity-10">analytics</i>
              </div>
              <span class="nav-link-text ms-1">Average Statistics</span>
          </a>
      </li>

      
      </ul>
    </div>
    
  </aside>
  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" data-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <h6 class="font-weight-bolder mb-0">
            {% if farm %}
                            {{ farm.owner_name }}'s Farm
                        {% else %}
                            Dashboard
                        {% endif %}

          </h6>
          
        </nav>
        
        </div>
        
      </div>

      {% comment %} search button {% endcomment %}

      {% comment %} <form class="d-flex" method="GET" action="{% url 'search_farm' %}">
        <input type="hidden" name="page" value="dashboard">
        <input class="form-control me-2" type="search" name="farm_id" placeholder="Farm ID" aria-label="search"
               style="border: 1px solid #ccc; text-align: center; color: black; 
                      background-color: white; border-radius: 5px; width: 200px; height: 38px;">
        <button class="btn btn-outline-primary" type="submit" style="height: 38px;">search</button>
    </form> {% endcomment %}




    {% comment %} <form class="d-flex" method="GET" action="{% url 'search_farm' %}">
      <input type="hidden" name="page" value="dashboard">
      <select class="form-control me-2" name="farm_id" 
              style="border: 1px solid #ccc; text-align: center; color: black; 
                     background-color: white; border-radius: 5px; width: 200px; height: 38px;">
          <option value="" disabled selected>Select Farm</option>
          {% for farm in all_farms %}
              <option value="{{ farm.farm_id }}">{{ farm.owner_name }}</option>
          {% endfor %}
      </select>
      <button class="btn btn-outline-primary" type="submit" style="height: 38px;">Search</button>
  </form>
   {% endcomment %}



  
   <form class="d-flex align-items-center" method="GET" action="{% url 'dashboard' %}" style="margin-bottom: 10px;">
    {% if cow_id %}
        <input type="hidden" name="cow_id" value="{{ cow_id }}">
    {% endif %}
    <select class="form-control me-2" name="farm_id" 
            style="border: 1px solid #ccc; text-align: center; color: black; 
                   background-color: white; border-radius: 5px; width: 200px; height: 38px;">
        <option value="" disabled {% if not farm_id %}selected{% endif %}>Select Farm</option>
        {% for farm_option in all_farms %}
            <option value="{{ farm_option.farm_id }}" 
                {% if farm_option.farm_id == farm_id %}selected{% endif %}>
                {{ farm_option.owner_name }}
            </option>
        {% endfor %}
    </select>
    <button class="btn btn-outline-primary" type="submit" style="height: 38px; margin-left: 10px;">Search</button>
</form>







      
    <style>
      /* Add styles for the placeholder */
      input::placeholder {
          color: #888; /* Lighter gray for better visibility */
          font-weight: normal; /* Normal weight for placeholder */
      }
      </style>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
            const dropdown = document.getElementById("farmDropdown");
    
            // Enable typing in the dropdown
            dropdown.addEventListener("click", function () {
                dropdown.size = dropdown.options.length; // Show all options
            });
    
            dropdown.addEventListener("blur", function () {
                dropdown.size = 0; // Collapse the dropdown on blur
            });
    
            // Filter options based on user input
            dropdown.addEventListener("keyup", function (event) {
                const filter = event.target.value.toLowerCase(); // Get typed value
                Array.from(dropdown.options).forEach((option) => {
                    const text = option.textContent.toLowerCase();
                    option.style.display = text.includes(filter) ? "block" : "none"; // Show/hide based on match
                });
            });
        });
    </script>
    
     
      
   

    </nav>
    <!-- End Navbar -->

     {% comment %} search bar {% endcomment %}






    {% comment %} <form method="GET" action="{% url 'search' %}" class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" name="q" placeholder="Search..." aria-label="Search" value="{{ query }}">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
  </form> {% endcomment %}
    {% comment %} search bar {% endcomment %}
   
  
    
    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-dark shadow-dark text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">weekend</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">Total Cows</p>

                {% comment %} dynamic total cows {% endcomment %}

                <h4 class="mb-0">
                        {% if farm %}
                            {{ farm.herd_size }}
                        {% else %}
                            2K
                        {% endif %}
                    </h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            <div class="card-footer p-3">
              <p class="mb-0"><span class="text-success text-sm font-weight-bolder">+55% </span>than last month</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-primary shadow-primary text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">person</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">Daily milk allowance</p>

                {% comment %} dynamic milk allowance {% endcomment %}

                <h4 class="mb-0">
                        {% if farm %}
                            {{ farm.tdm }} L
                        {% else %}
                            2,300L
                        {% endif %}
                    </h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            <div class="card-footer p-3">
              <p class="mb-0"><span class="text-success text-sm font-weight-bolder">+3% </span>than last month</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-success shadow-success text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">person</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">Address</p>

                {% comment %} dynamic address {% endcomment %}
                
                <h4 class="mb-0">
                  {% if farm %}
                      {{ farm.address }} L
                  {% else %}
                      Kebele 01
                  {% endif %}
              </h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            {% comment %} <div class="card-footer p-3">
              <p class="mb-0"><span class="text-danger text-sm font-weight-bolder">-2%</span> than yesterday</p>
            </div> {% endcomment %}
          </div>
        </div>
        <div class="col-xl-3 col-sm-6">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-info shadow-info text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">weekend</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">Phone number</p>

                {% comment %} dynamic phone {% endcomment %}

                <h4 class="mb-0">
                        {% if farm %}
                            {{ farm.telephone }} L
                        {% else %}
                        0946436734
                        {% endif %}
                    </h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            {% comment %} <div class="card-footer p-3">
              <p class="mb-0"><span class="text-success text-sm font-weight-bolder">+5% </span>than yesterday</p>
            </div> {% endcomment %}
          </div>
        </div>
      </div>



      

      <div class="row mt-4">


        {% comment %} <form class="d-flex" method="GET" action="{% url 'search_animal' %}">
          <input class="form-control me-2" type="search" name = "cow_id" placeholder="Cow ID" aria-label="search" 
                 style="border: 1px solid #ccc; text-align: center; color: black; 
                        background-color: white; border-radius: 5px; width: 200px; height: 38px;">
          <button class="btn btn-outline-primary" type="submit" style="height: 38px;">search</button>
        </form> {% endcomment %}
    
    
        {% comment %} new cow ID searchbar {% endcomment %}

        <form class="d-flex align-items-center" method="GET" action="{% url 'dashboard' %}">
          {% if farm_id %}
              <input type="hidden" name="farm_id" value="{{ farm_id }}">
          {% endif %}
          <input class="form-control me-2" type="search" name="cow_id" placeholder="Cow ID" aria-label="search" 
                 style="border: 1px solid #ccc; text-align: center; color: black; 
                        background-color: white; border-radius: 5px; width: 200px; height: 38px;">
          <button class="btn btn-outline-primary" type="submit" style="height: 38px; margin-left: 10px;">Search</button>
      </form>
      
      
      
      

        {% comment %} new cow ID searchbar end {% endcomment %}


<!-- Fertility Window Graph or Message -->

{% comment %} old graph start {% endcomment %}


{% comment %} <div style="width: 100%; max-width: 600px; height: 300px;">
  {% if animal %}
    <canvas id="fertility-chart"></canvas>
  {% else %}
    <p>No cow ID found</p>
  {% endif %}
</div>

<!-- Load Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.0"></script>

<script>
  {% if animal %}
    // Set heat sign start time from database or default to 2:00 AM if missing
    let heatSignTime = "{{ animal.heat_sign_start_time|date:'Y-m-d H:i:s' }}" || "2000-01-01 02:00:00";
    heatSignTime = new Date(heatSignTime);

    // Ensure heatSignTime is valid
    if (!isNaN(heatSignTime.getTime())) {
      // Set default current time and make sure it follows heatSignTime within the same 24-hour period
      const currentTime = new Date();
      
      // Calculate hours and minutes difference only within the same day cycle
      const hoursDiff = currentTime.getHours() - heatSignTime.getHours();
      const minutesDiff = (currentTime.getMinutes() - heatSignTime.getMinutes()) / 60;
      let hoursPassed = hoursDiff + minutesDiff;

      // Clamp hoursPassed to ensure it's within 0-18 hours
      hoursPassed = Math.min(18, Math.max(0, hoursPassed));

      // Generate time labels from heatSignTime to heatSignTime + 18 hrs
      const timeLabels = [];
      for (let i = 0; i <= 18; i += 2) {
        const labelTime = new Date(heatSignTime.getTime() + i * 60 * 60 * 1000);
        timeLabels.push(labelTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
      }

      // Calculate pointer position on x-axis (mapped to 0-9 range)
      const pointerPosition = hoursPassed / 2;
      const pointerYValue = hoursPassed <= 6 ? 90 : hoursPassed <= 12 ? 60 : 30; // Set y-value based on color sections

      // Debugging log statements to verify values
      console.log("Heat Sign Time:", heatSignTime);
      console.log("Current Time:", currentTime);
      console.log("Hours Passed:", hoursPassed);
      console.log("Pointer Position:", pointerPosition);

      // Initialize the chart
      var ctx = document.getElementById("fertility-chart").getContext("2d");

      new Chart(ctx, {
        type: "bar",
        data: {
          labels: timeLabels, // X-axis time labels (0-18 hours)
          datasets: [{
            label: "Probability of Pregnancy",
            data: [90, 90, 90, 60, 60, 60, 30, 30, 30], // Probability data across 0-6, 6-12, 12-18 hours
            backgroundColor: [
              ...Array(3).fill("rgba(76, 175, 80, 0.8)"), // Green for 0-6 hrs
              ...Array(3).fill("rgba(255, 193, 7, 0.8)"), // Yellow for 6-12 hrs
              ...Array(3).fill("rgba(244, 67, 54, 0.8)")  // Red for 12-18 hrs
            ],
            barPercentage: 1.0,
            categoryPercentage: 1.0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `Time: ${timeLabels[Math.floor(pointerPosition)]} (${Math.floor(hoursPassed)} hrs passed)`;
                }
              }
            },
            annotation: {
              annotations: {
                pointerDot: {
                  type: "point",
                  xValue: pointerPosition,
                  yValue: pointerYValue,
                  backgroundColor: "black",
                  radius: 6,
                  borderWidth: 2,
                  borderColor: "white",
                  label: {
                    enabled: true,
                    content: `Current Time: ${Math.floor(hoursPassed)} hrs`,
                    position: "top",
                    backgroundColor: "rgba(0,0,0,0.7)",
                    color: "white",
                    font: { size: 12 }
                  }
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              ticks: { color: "#333" },
              grid: {
                color: "rgba(0, 0, 0, 0.1)",
                borderDash: [5, 5]
              },
              title: {
                display: true,
                text: "Probability (%)",
                color: "#333",
                font: { size: 14 }
              }
            },
            x: {
              ticks: { color: "#333" },
              grid: { display: false },
              title: {
                display: true,
                text: "Time (hours after heat sign)",
                color: "#333",
                font: { size: 14 }
              }
            }
          }
        }
      });
    }
  {% endif %}
</script> {% endcomment %}











       {% comment %} old dynamic graph end {% endcomment %}




       {% comment %} new graph start {% endcomment %}

       <div style="width: 100%; max-width: 800px; height: 300px;">
        {% if animal %}
          <canvas id="fertility-chart"></canvas>
        {% else %}
          <p>No cow ID found</p>
        {% endif %}
      </div>
      
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.0"></script>
      
      <script>
        {% if animal %}
          let heatSignTime = "{{ animal.heat_sign_start_time|date:'Y-m-d H:i:s' }}" || "2024-12-14 02:00:00";
          heatSignTime = new Date(heatSignTime);
      
          if (!isNaN(heatSignTime.getTime())) {
            const currentTime = new Date();
            const hoursPassed = (currentTime - heatSignTime) / (60 * 60 * 1000);
      
            // Clamp hoursPassed to graph range (H + 6 to H + 30)
            const graphStart = 6;
            const graphEnd = 30;
            const clampedHours = Math.min(graphEnd, Math.max(graphStart, hoursPassed));
      
            // Generate X-axis labels (H + 6 to H + 30 in 2-hour increments)
            const timeLabels = [];
            for (let i = graphStart; i <= graphEnd; i += 2) {
              const labelTime = new Date(heatSignTime.getTime() + i * 60 * 60 * 1000);
              timeLabels.push(labelTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
            }
      
            // Custom segmenting for visual clarity
            const customColors = [];
            for (let i = graphStart; i < graphEnd; i += 2) {
              if (i < 9) {
                customColors.push("rgba(255, 193, 7, 0.8)"); // Yellow: H + 6 to H + 9 (8:00 AM to 11:00 AM)
              } else if (i < 24) {
                customColors.push("rgba(76, 175, 80, 0.8)"); // Green: H + 9 to H + 24 (11:00 AM to 2:00 AM)
              } else if (i < 28) {
                customColors.push("rgba(255, 193, 7, 0.8)"); // Yellow: H + 24 to H + 28 (2:00 AM to 6:00 AM)
              } else {
                customColors.push("rgba(244, 67, 54, 0.8)"); // Red: H + 28 to H + 30 (6:00 AM to 8:00 AM)
              }
            }
      
            // Pointer position and y-value
            const pointerPosition = (clampedHours - graphStart) / 2; // Map hours to 0-12 range
            const pointerYValue =
              clampedHours <= 9 ? 30 : // Yellow: H + 6 to H + 9
              clampedHours <= 24 ? 90 : // Green: H + 9 to H + 24
              clampedHours <= 28 ? 30 : // Yellow: H + 24 to H + 28
              0; // Red: H + 28 to H + 30
      
            // Debugging logs
            console.log("Heat Sign Time:", heatSignTime);
            console.log("Current Time:", currentTime);
            console.log("Hours Passed:", hoursPassed);
            console.log("Clamped Hours:", clampedHours);
            console.log("Pointer Position:", pointerPosition);
      
            // Chart setup
            const ctx = document.getElementById("fertility-chart").getContext("2d");
      
            new Chart(ctx, {
              type: "bar",
              data: {
                labels: timeLabels,
                datasets: [{
                  label: "Probability of Pregnancy",
                  data: [
                    ...Array(2).fill(30), // Yellow: H + 6 to H + 9
                    ...Array(7).fill(90), // Green: H + 9 to H + 24
                    ...Array(2).fill(30), // Yellow: H + 24 to H + 28
                    ...Array(1).fill(20),  // Red: H + 28 to H + 30
                  ],
                  backgroundColor: customColors,
                  barPercentage: 1.0,
                  categoryPercentage: 1.0
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                  legend: { display: false },
                  tooltip: {
                    callbacks: {
                      label: function(context) {
                        return `Time: ${timeLabels[Math.floor(pointerPosition)]} (${Math.floor(clampedHours)} hrs passed)`;
                      }
                    }
                  },
                  annotation: {
                    annotations: {
                      pointerDot: {
                        type: "point",
                        xValue: pointerPosition,
                        yValue: pointerYValue,
                        backgroundColor: "black",
                        radius: 6,
                        borderWidth: 2,
                        borderColor: "white",
                        label: {
                          enabled: true,
                          content: `Current Time: ${Math.floor(clampedHours)} hrs`,
                          position: "top",
                          backgroundColor: "rgba(0,0,0,0.7)",
                          color: "white",
                          font: { size: 12 }
                        }
                      }
                    }
                  }
                },
                scales: {
                  y: {
                    beginAtZero: true,
                    max: 100,
                    ticks: { color: "#333" },
                    grid: { color: "rgba(0, 0, 0, 0.1)", borderDash: [5, 5] },
                    title: { display: true, text: "Probability (%)", color: "#333", font: { size: 14 } }
                  },
                  x: {
                    ticks: { color: "#333" },
                    grid: { display: false },
                    title: { display: true, text: "Time (hours after heat sign)", color: "#333", font: { size: 14 } }
                  }
                }
              }
            });
          }
        {% endif %}
      </script>
      
      
      
      



       {% comment %} new graph end {% endcomment %}
        
       
      </div> 

           

      <div class="row mb-4">
        <div class="col-lg-8 col-md-6 mb-md-0 mb-4">
          <div class="card">
            <div class="card-header pb-0">
              <div class="row">
                <div class="col-lg-6 col-7">
                  {% comment %} <h6>Farm details</h6> {% endcomment %}
                  {% comment %} <p class="text-sm mb-0">
                    <i class="fa fa-check text-info" aria-hidden="true"></i>
                    <span class="font-weight-bold ms-1">
                      {% if animal %}
                      Total daily milk of: {{ animal.tdm }} 
                    {% else %}
                            none
                    {% endif %}
                    </span> L produced
                  </p> {% endcomment %}
                </div>
                <div class="col-lg-6 col-5 my-auto text-end">
                  <div class="dropdown float-lg-end pe-4">
                    <a class="cursor-pointer" id="dropdownTable" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="fa fa-ellipsis-v text-secondary"></i>
                    </a>
                    {% comment %} <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5" aria-labelledby="dropdownTable">
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Action</a></li>
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Another action</a></li>
                      <li><a class="dropdown-item border-radius-md" href="javascript:;">Something else here</a></li>
                    </ul> {% endcomment %}
                  </div>
                </div>
              </div>
            </div>

            {% comment %} here {% endcomment %}
            

                
              
        <div class="col-lg-4 col-md-6">
          <div class="card h-100">
            <div class="card-header pb-0">
              <h6>Cow details</h6>
              <p class="text-sm">
                <i class="fa fa-arrow-up text-success" aria-hidden="true"></i>
                <span class="font-weight-bold">
                  {% if animal %}
                      Cow ID: {{ animal.cow_id }} 
                    {% else %}
                         Cow ID:  0
                    {% endif %}
                </span> 
              </p>
            </div>
            <div class="card-body p-3">
              <div class="timeline timeline-one-side">
                <div class="timeline-block mb-3">
                  <span class="timeline-step">
                    <i class="material-icons text-success text-gradient">notifications</i>
                  </span>
                  <div class="timeline-content">
                    <h6 class="text-dark text-sm font-weight-bold mb-0">
                      {% if animal %}
                      Heat signs: {{ animal.heat_signs }} 
                    {% else %}
                         Heat signs:   none
                    {% endif %}
                    </h6>
                    {% comment %} <p class="text-secondary font-weight-bold text-xs mt-1 mb-0">22 DEC 7:20 PM</p> {% endcomment %}
                  </div>
                </div>
                <div class="timeline-block mb-3">
                  <span class="timeline-step">
                    <i class="material-icons text-danger text-gradient">code</i>
                  </span>
                  <div class="timeline-content">
                    <h6 class="text-dark text-sm font-weight-bold mb-0">
                      {% if animal %}
                      DALC: {{ animal.days_after_calving }} 
                    {% else %}
                          DALC:  0
                    {% endif %}
                    </h6>
                    {% comment %} <p class="text-secondary font-weight-bold text-xs mt-1 mb-0">21 DEC 11 PM</p> {% endcomment %}
                  </div>
                </div>

                {% comment %} date of AI  {% endcomment %}
                <div class="timeline-block mb-3">
                  <span class="timeline-step">
                    <i class="material-icons text-info text-gradient">shopping_cart</i>
                  </span>
                  <div class="timeline-content">
                    <h6 class="text-dark text-sm font-weight-bold mb-0">
                      {% if animal %}
                      Date of AI: {{ animal.date_ai }} 
                    {% else %}
                            Date of AI: 0
                    {% endif %}
                    </h6>
                    {% comment %} <p class="text-secondary font-weight-bold text-xs mt-1 mb-0">21 DEC 9:34 PM</p> {% endcomment %}
                  </div>
                </div>
                {% comment %} date if AI {% endcomment %}

                {% comment %} Insemination number {% endcomment %}
                <div class="timeline-block mb-3">
                  <span class="timeline-step">
                    <i class="material-icons text-warning text-gradient">credit_card</i>
                  </span>
                  <div class="timeline-content">
                    <h6 class="text-dark text-sm font-weight-bold mb-0">
                      {% if animal %}
                      Insemination number: {{ animal.insemination_number }} 
                    {% else %}
                            Insemination number: 0
                    {% endif %}
                    </h6>
                    {% comment %} <p class="text-secondary font-weight-bold text-xs mt-1 mb-0">20 DEC 2:20 AM</p> {% endcomment %}
                  </div>
                </div>

                {% comment %} Insemination number end {% endcomment %}

                <div class="timeline-block mb-3">
                  <span class="timeline-step">
                    <i class="material-icons text-primary text-gradient">key</i>
                  </span>
                  <div class="timeline-content">
                    <h6 class="text-dark text-sm font-weight-bold mb-0">
                      {% if animal %}
                      Breed: {{ animal.breed }} 
                    {% else %}
                           Breed: 0
                    {% endif %}
                    </h6>
                    {% comment %} <p class="text-secondary font-weight-bold text-xs mt-1 mb-0">18 DEC 4:54 AM</p> {% endcomment %}
                  </div>
                </div>

                {% comment %} day count since last heat sign {% endcomment %}
                <div class="timeline-block">
                  <span class="timeline-step">
                    <i class="material-icons text-dark text-gradient">payments</i>
                  </span>
                  <div class="timeline-content">
                    <h6 class="text-dark text-sm font-weight-bold mb-0">
                      {% if animal %}
                      day count since last heat sign: {{animal.last_heat_sign}} 
                    {% else %}
                            day count since last heat sign: 0
                    {% endif %}
                    </h6>
                    {% comment %} <p class="text-secondary font-weight-bold text-xs mt-1 mb-0">17 DEC</p> {% endcomment %}
                  </div>
                </div>
                {% comment %} day count since last heat sign end {% endcomment %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <div class="fixed-plugin">
    <a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
      <i class="material-icons py-2">settings</i>
    </a>
    <div class="card shadow-lg">
      <div class="card-header pb-0 pt-3">
        <div class="float-start">
          <h5 class="mt-3 mb-0">Material UI Configurator</h5>
          <p>See our dashboard options.</p>
        </div>
        <div class="float-end mt-4">
          <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
            <i class="material-icons">clear</i>
          </button>
        </div>
        <!-- End Toggle Button -->
      </div>
      <hr class="horizontal dark my-1">
      <div class="card-body pt-sm-3 pt-0">
        <!-- Sidebar Backgrounds -->
        <div>
          <h6 class="mb-0">Sidebar Colors</h6>
        </div>
        <a href="javascript:void(0)" class="switch-trigger background-color">
          <div class="badge-colors my-2 text-start">
            <span class="badge filter bg-gradient-primary active" data-color="primary" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-dark" data-color="dark" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-success" data-color="success" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-warning" data-color="warning" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-danger" data-color="danger" onclick="sidebarColor(this)"></span>
          </div>
        </a>
        <!-- Sidenav Type -->
        <div class="mt-3">
          <h6 class="mb-0">Sidenav Type</h6>
          <p class="text-sm">Choose between 2 different sidenav types.</p>
        </div>
        <div class="d-flex">
          <button class="btn bg-gradient-dark px-3 mb-2 active" data-class="bg-gradient-dark" onclick="sidebarType(this)">Dark</button>
          <button class="btn bg-gradient-dark px-3 mb-2 ms-2" data-class="bg-transparent" onclick="sidebarType(this)">Transparent</button>
          <button class="btn bg-gradient-dark px-3 mb-2 ms-2" data-class="bg-white" onclick="sidebarType(this)">White</button>
        </div>
        <p class="text-sm d-xl-none d-block mt-2">You can change the sidenav type just on desktop view.</p>
        <!-- Navbar Fixed -->
        <div class="mt-3 d-flex">
          <h6 class="mb-0">Navbar Fixed</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed" onclick="navbarFixed(this)">
          </div>
        </div>
        <hr class="horizontal dark my-3">
        <div class="mt-2 d-flex">
          <h6 class="mb-0">Light / Dark</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input class="form-check-input mt-1 ms-auto" type="checkbox" id="dark-version" onclick="darkMode(this)">
          </div>
        </div>
        <hr class="horizontal dark my-sm-4">
        <a class="btn bg-gradient-info w-100" href="https://www.creative-tim.com/product/material-dashboard-pro">Free Download</a>
        <a class="btn btn-outline-dark w-100" href="https://www.creative-tim.com/learning-lab/bootstrap/overview/material-dashboard">View documentation</a>
        <div class="w-100 text-center">
          <a class="github-button" href="https://github.com/creativetimofficial/material-dashboard" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star creativetimofficial/material-dashboard on GitHub">Star</a>
          <h6 class="mt-3">Thank you for sharing!</h6>
          <a href="https://twitter.com/intent/tweet?text=Check%20Material%20UI%20Dashboard%20made%20by%20%40CreativeTim%20%23webdesign%20%23dashboard%20%23bootstrap5&amp;url=https%3A%2F%2Fwww.creative-tim.com%2Fproduct%2Fsoft-ui-dashboard" class="btn btn-dark mb-0 me-2" target="_blank">
            <i class="fab fa-twitter me-1" aria-hidden="true"></i> Tweet
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.creative-tim.com/product/material-dashboard" class="btn btn-dark mb-0 me-2" target="_blank">
            <i class="fab fa-facebook-square me-1" aria-hidden="true"></i> Share
          </a>
        </div>
      </div>
    </div>
  </div>
  <!--   Core JS Files   -->
  <script src="{% static 'js/core/popper.min.js' %}"></script>
  <script src="{% static 'js/core/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/plugins/perfect-scrollbar.min.js' %}"></script>
  <script src="{% static 'js/plugins/smooth-scrollbar.min.js' %}"></script>
  <script src="{% static 'js/plugins/chartjs.min.js' %}"></script>
  <script>
    {% comment %} var ctx = document.getElementById("chart-bars").getContext("2d"); {% endcomment %}

    {% comment %} new Chart(ctx, {
      type: "bar",
      data: {
        labels: ["M", "T", "W", "T", "F", "S", "S"],
        datasets: [{
          label: "Sales",
          tension: 0.4,
          borderWidth: 0,
          borderRadius: 4,
          borderSkipped: false,
          backgroundColor: "rgba(255, 255, 255, .8)",
          data: [50, 20, 10, 22, 50, 10, 40],
          maxBarThickness: 6
        }, ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false,
          }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5],
              color: 'rgba(255, 255, 255, .2)'
            },
            ticks: {
              suggestedMin: 0,
              suggestedMax: 500,
              beginAtZero: true,
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
              color: "#fff"
            },
          },
          x: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5],
              color: 'rgba(255, 255, 255, .2)'
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        },
      },
    }); {% endcomment %}


    var ctx2 = document.getElementById("chart-line").getContext("2d");

    new Chart(ctx2, {
      type: "line",
      data: {
        labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        datasets: [{
          label: "Mobile apps",
          tension: 0,
          borderWidth: 0,
          pointRadius: 5,
          pointBackgroundColor: "rgba(255, 255, 255, .8)",
          pointBorderColor: "transparent",
          borderColor: "rgba(255, 255, 255, .8)",
          borderColor: "rgba(255, 255, 255, .8)",
          borderWidth: 4,
          backgroundColor: "transparent",
          fill: true,
          data: [50, 40, 300, 320, 500, 350, 200, 230, 500],
          maxBarThickness: 6

        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false,
          }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5],
              color: 'rgba(255, 255, 255, .2)'
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        },
      },
    });

    var ctx3 = document.getElementById("chart-line-tasks").getContext("2d");

    new Chart(ctx3, {
      type: "line",
      data: {
        labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        datasets: [{
          label: "Mobile apps",
          tension: 0,
          borderWidth: 0,
          pointRadius: 5,
          pointBackgroundColor: "rgba(255, 255, 255, .8)",
          pointBorderColor: "transparent",
          borderColor: "rgba(255, 255, 255, .8)",
          borderWidth: 4,
          backgroundColor: "transparent",
          fill: true,
          data: [50, 40, 300, 220, 500, 250, 400, 230, 500],
          maxBarThickness: 6

        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false,
          }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5],
              color: 'rgba(255, 255, 255, .2)'
            },
            ticks: {
              display: true,
              padding: 10,
              color: '#f8f9fa',
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        },
      },
    });
  </script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="{% static 'js/material-dashboard.min.js?v=3.1.0' %}"></script>
</body>

</html>